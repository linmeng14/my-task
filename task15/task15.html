<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>task15</title>
</head>
<body>
	<ul id="source">
		<li>北京空气质量：<b>90</b></li>
    	<li>上海空气质量：<b>70</b></li>
    	<li>天津空气质量：<b>80</b></li>
    	<li>广州空气质量：<b>50</b></li>
    	<li>深圳空气质量：<b>40</b></li>
    	<li>福州空气质量：<b>32</b></li>
    	<li>成都空气质量：<b>90</b></li>
	</ul>
	<ul id="resort">
		
	</ul>
	<button id="sort-btn">排序</button>
	<script>
		// 获取空气质量与城市的数组
		function getData(){
			var data=[],text,city,api;
			var source=document.getElementById('source');
			var oli=source.getElementsByTagName('li');
			for (var i = 0; i < oli.length; i++) {
				text=oli[i].innerHTML;
				aqi=parseInt(oli[i].getElementsByTagName('b')[0].innerText);
				city=text.replace('<b>'+aqi+'</b>','');
				data[i]=[city,aqi];
			}
			return data;
		}
		// 将data数组排序
		function sortAqiData(data){
			data.sort(function(x,y){
				return x[1]-y[1]
			});
			return data;	
		}
		// 将排序好的插入到新的列表中	
		function render(data){
			var resort=document.getElementById('resort');
			var list=['一','二','三','四','五','六','七'];
			for (var i = 0; i < data.length; i++) {
				var ali=document.createElement('li');
				ali.innerHTML="第"+list[i]+"名"+data[i][0]+":"+'<b>'+data[i][1]+'</b>';
				resort.appendChild(ali);
			}
		}
		// 绑定按钮事件
		function btnHandle(){
			var aqiData=getData();
			aqiData=sortAqiData(aqiData);
			render(aqiData);
		}
		// 初始化事件
		function init(){
			var btn=document.getElementById('sort-btn');
			btn.onclick=function(){
				btnHandle();
			}
		}
		init();
	</script>
</body>
</html>